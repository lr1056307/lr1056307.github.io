/*!
 * Generated file - Do not change here!
 */
!function(e){"use strict";function n(){a().then(function(e){d(S.binderId,S.accessToken,S.clientId,S.orgId,S.mode),s()}).fail(function(e){console.log(e)});var e=6e5;b(e)}function o(){U.click(function(e){y||(t(),y=!0,T?i():(r(),C||(C=!0,u(S.binderId,S.accessToken,S.clientId,S.orgId,S.mode))))}),v.click(i)}function t(){U.toggleClass(p)}function r(){k.slideDown(400,c),T=!0,e("body").addClass(I)}function i(){k.slideUp(400,c),T=!1,e("body").removeClass(I)}function c(){y=!1}function s(){U.show()}function a(){var n="/api/v1/chat/token";return e.post(n).then(function(e){return S.binderId=e.binderId,S.accessToken=e.token,S.clientId=e.clientId,S.uniqueId=e.uniqueId,S.orgId=e.orgId,S.mode=e.mode,S.mepUrl=e.mepUrl,S.baseUrl=e.baseUrl,S.rootUrl=e.rootUrl,e})}function d(e,n,o,t,r){var i={mode:r,client_id:o,access_token:n,language:"de",org_id:t,base_url:S.baseUrl,invalid_token:function(e){a().then(function(){d(S.binderId,S.accessToken,S.clientId,S.orgId,S.mode)})}};Moxtra.init(i)}function u(e,n,o,t,r){var i={binder_id:e,iframe:!0,tagid4iframe:"chat-container",iframewidth:"100%",iframeheight:"100%",autostart_note:!0,border:!1,scroll:!0,extension:{show_binder_options:!1},publish_feed:function(e){l().then(function(e){if("RESPONSE_SUCCESS"==e.code){var n=f(e.data);0==n&&h().then(function(){console.log("Searching for employee")},function(e){console.error(e)})}else console.error(e)})},start_chat:function(e){console.log("Chat started session Id: "+e.session_id)},start_meet:function(e){console.log("Meet started session key: "+e.session_key+" session id: "+e.session_id)},end_meet:function(e){console.log("Meet end event")},invite_member:function(e){console.log("Invite member into binder Id: "+e.binder_id)},request_note:function(e){console.log("Clip start request")},error:function(e){console.log("Chat error code: "+e.error_code+" error message: "+e.error_message)}};Moxtra.chatView(i)}function l(){return e.get({url:S.rootUrl+"/"+S.binderId,headers:{Accept:"application/json; charset=UTF-8",Authorization:"Bearer "+S.accessToken},cache:!1})}function f(e){var n=e.users.filter(function(e){return"BOARD_READ_WRITE"==e.type}),o=n.length-1;return o}function h(){var n=S.mepUrl+"/agent/request";return e.ajax({type:"GET",url:n,headers:{Accept:"application/json; charset=UTF-8",Authorization:"Bearer "+S.accessToken,uid:S.uniqueId}})}function g(){var n="/api/v1/chat/keepalive";return e.ajax({type:"POST",url:n})}function b(e){g(),setInterval(g,e)}var m="chat-container",I="chat-open",_="chat-button",p="chat-button--opened",v=e(".mobile-chat-close-button"),k=e("."+m),U=e("."+_),T=!1,y=!1,C=!1,S={};n(),o()}(jQuery);